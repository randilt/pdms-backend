<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Package Delivery Management System</title>
    <link rel="stylesheet" href="/styles/index.css" />
  </head>
  <body>
    <img src="/logo.png" alt="Project Logo" class="logo" />
    <h1>Welcome to the Package Delivery Management System</h1>
    <nav>
      <ul>
        <li><a href="/34082115/Durgka/add-driver">Add Driver</a></li>
        <li><a href="/34082115/Durgka/list-drivers">List All Drivers</a></li>
        <li><a href="/34082115/Durgka/delete-drivers">Delete Driver</a></li>
        <li><a href="/34082115/Durgka/add-package">Add Package</a></li>
        <li><a href="/34082115/Durgka/list-packages">List All Packages</a></li>
        <li><a href="/34082115/Durgka/delete-packages">Delete Package</a></li>
      </ul>
    </nav>

    <!-- Add the labels for Drivers and Packages -->
    <div class="stats">
      <h2>Current Statistics</h2>
      <p>Number of Drivers: <span id="driver-count">Loading...</span></p>
      <p>Number of Packages: <span id="package-count">Loading...</span></p>
    </div>

    <!-- Add script to fetch and update the counts -->
    <script>
      async function fetchCounts() {
        try {
          // Fetch drivers count
          const driversResponse = await fetch(
            "/34082115/Durgka/api/v1/drivers"
          );
          const driversData = await driversResponse.json();
          const driverCount = driversData.length;

          // Fetch packages count
          const packagesResponse = await fetch(
            "/34082115/Durgka/api/v1/packages"
          );
          const packagesData = await packagesResponse.json();
          const packageCount = packagesData.length;

          // Update the labels with fetched counts
          document.getElementById("driver-count").textContent = driverCount;
          document.getElementById("package-count").textContent = packageCount;
        } catch (error) {
          console.error("Error fetching counts:", error);
          document.getElementById("driver-count").textContent = "Error";
          document.getElementById("package-count").textContent = "Error";
        }
      }

      // Call the function to fetch and display counts
      fetchCounts();
    </script>
  </body>
</html>
